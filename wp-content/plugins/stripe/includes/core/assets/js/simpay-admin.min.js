!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=325)}({138:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(17);function a(e,t){if(e!==t){var n=document.getElementById("simpay-test-mode-toggle-notice"),i=document.getElementById("simpay-toggle-notice-status"),a=document.getElementById("simpay-toggle-notice-status-link");n.classList.add("notice"),n.classList.add("notice-warning"),n.style.display="block",i&&a&&(i.innerHTML="<strong>"+i.dataset[e]+"</strong>",a.href=a.dataset[e])}}Object(i.a)((function(){var e=document.getElementById("simpay-stripe-account-info");e&&wp.ajax.send("simpay_stripe_connect_account_information",{data:{nonce:e.dataset.nonce,account_id:e.dataset.accountId},success:function(t){e.querySelector("p").innerHTML=t.message,e.style.display="block",e.classList.add("notice"),"simpay-stripe-activated-account-actions"===t.actions?e.classList.add("notice-info"):e.classList.add("notice-warning");var n=document.getElementById(t.actions);n&&(n.style.display="block")},error:function(t){e.querySelector("p").innerHTML=t.message,e.style.display="block",e.classList.add("notice"),e.classList.add("notice-error");var n=document.getElementById(t.actions);n&&(n.style.display="block")}})}))},17:function(e,t,n){"use strict";function i(e){"complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",e):e()}n.d(t,"a",(function(){return i}))},30:function(e,t){e.exports=jQuery},325:function(e,t,n){"use strict";n.r(t),function(e){var t=n(50),i=(n(326),n(138));n(327);window.wpsp=window.wpsp||{hooks:t.a};var a,r,o,s={};s={init:function(){r=a(document.body),o=r.find("#simpay-form-settings"),this.handleMetaboxTabClick(),window.postboxes&&window.postboxes.handle_click&&o.on("click",".postbox .simpay-hndle, .postbox .simpay-handlediv",window.postboxes.handle_click),["_amount_type","_success_redirect_type","_subscription_type","_subscription_custom_amount","_form_display_type",".simpay-total-amount-label-recurring",".simpay-total-amount-label-tax",".simpay-shipping-address",".simpay-text-multiline",".simpay-dropdown-type input",".simpay-radio-type input"].forEach((function(e){var t=a(e),n=!1;"."!==e.substring(0,1)?t='input[name="'.concat(e,'"]'):(t=e,n=!0),a("#simpay-form-settings").on("change",t,(function(){var t=a("#simpay-form-settings");!0===n&&(t=a(this).closest(".simpay-field-data"));var i=a(this).val();a(this).is(":checkbox")&&(i=a(this).is(":checked")?"yes":"no"),t.find(a('.simpay-show-if[data-if="'.concat(e,'"]'))).each((function(){var e=a(this),t=e.data("is");e.hide(),t.includes(i)&&e.show()}))})),a(t).filter(":checked").trigger("change")})),t.a.addAction("settings.toggleTestMode","wpsp/settings/stripe-connect",i.a),o.on("click.simpayTabLink",".simpay-tab-link",(function(e){e.preventDefault(),s.handleInternalLinkToTabClicks(a(this))})),o.on("click.simpayImagePreview",".simpay-remove-image-preview",(function(e){s.handleRemoveImagePreviewClick(e)})),r.find(".simpay-amount-input").trigger("blur.validateAndUpdateAmount"),this.setupChosen(),this.addMediaFields(),this.stripeConnect(),r.trigger("simpayAdminInit")},handleRemoveImagePreviewClick:function(e){e.preventDefault(),o.find(".simpay-image-preview-wrap").hide(),o.find("#_image_url").val("")},addMediaFields:function(){var e;a(".simpay-media-uploader").on("click",(function(t){t.preventDefault(),window.simpayMediaUploaderInputField=a(this),e||(e=wp.media.frames.file_frame=wp.media({title:spGeneral.i18n.mediaTitle,button:{text:spGeneral.i18n.mediaButtonText},multiple:!1})).on("select",(function(){var t=e.state().get("selection").first().toJSON(),n=a("#_image_url"),i="id"===n.data("fvalue")?t.id:t.url;a(".simpay-image-preview-wrap").show(),a(".simpay-image-preview").prop("src",i),n.val(i)})),e.open()}))},setupChosen:function(){var e=a(".simpay-chosen-select, .simpay-chosen-search");e.chosen({disable_search_threshold:20}),e.chosen()},handleMetaboxTabClick:function(){var e=a("ul.simpay-tabs a"),t=a("div.simpay-panel"),n=e.parents("li");e.on("click",(function(e){e.preventDefault();var i=a(this).parent(),r=a(a(this).attr("href")),o=a(this).attr("href");history.pushState(null,null,o),a('[name="simpay_form_settings_tab"]').val(o),a(".simpay-panels > .spinner").hide(),n.removeClass("active"),i.addClass("active"),t.addClass("simpay-panel-hidden"),r.removeClass("simpay-panel-hidden")}));var i="#payment-options-settings-panel";location.hash.length&&(i=location.hash);var r=a('ul.simpay-tabs a[href="'+i+'"]');a('[name="simpay_form_settings_tab"]').val(i),r.length&&r.click()},stripeConnect:function(){a("#simpay-settings-keys-mode-test-mode").closest(".form-table").prev().hide().prev().hide(),a("#wpsp-api-keys-row-reveal button").click((function(e){e.preventDefault(),a("#simpay-settings-keys-mode-test-mode").closest(".form-table").prev().show().prev().show(),a("#wpsp-api-keys-row-hide").show(),a(this).parent().hide(),a(".wpsp-manual-key-warning").show()})),a("#wpsp-api-keys-row-hide button").click((function(e){e.preventDefault(),a("#simpay-settings-keys-mode-test-mode").closest(".form-table").prev().hide().prev().hide(),a("#wpsp-api-keys-row-reveal").show(),a(this).parent().hide(),a(".wpsp-manual-key-warning").hide()}))},handleInternalLinkToTabClicks:function(e){var t=e.data("show-tab");r.find("."+t+"-tab a").click()}},(a=e)(document).ready((function(e){s.init()}))}.call(this,n(30))},326:function(e,t,n){"use strict";var i=n(17);Object(i.a)((function(){var e=window.wpsp.hooks,t=document.querySelectorAll('[name="simpay_settings_keys[mode][test_mode]"]'),n=document.querySelector('[name="simpay_settings_keys[mode][test_mode]"]:checked');if(0!==t.length){var i="enabled"===n.value?"test":"live";e.doAction("settings.toggleTestMode",i,i),_.each(t,(function(t){return t.addEventListener("change",(function(t){var n="enabled"===t.target.value?"test":"live";e.doAction("settings.toggleTestMode",n,"test"===n?"live":"test")}))}))}}))},327:function(e,t,n){"use strict";var i=n(17);Object(i.a)((function(){var e=document.querySelector(".simpay-recaptcha-feedback");if(e){var t=simpayGoogleRecaptcha,n=t.siteKey,i=t.i18n;""!==n&&grecaptcha.ready((function(){var e=document.querySelector(".grecaptcha-badge");e&&(e.style.display="none");try{grecaptcha.execute(n,{action:"simple_pay_admin_test"}).then((function(e){wp.ajax.send("simpay_validate_recaptcha_source",{data:{token:e,recaptcha_action:"simple_pay_admin_test"},error:a})})).catch(a)}catch(e){a()}}))}function a(){e.style.display="block",e.classList.add("notice-error"),e.querySelector("p").innerText=i.invalid}}))},50:function(e,t,n){"use strict";var i=function(e){return"string"!=typeof e||""===e?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)};var a=function(e){return"string"!=typeof e||""===e?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)};var r=function(e){return function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(a(t)&&i(n))if("function"==typeof r)if("number"==typeof o){var s={callback:r,priority:o,namespace:n};if(e[t]){var c,l=e[t].handlers;for(c=l.length;c>0&&!(o>=l[c-1].priority);c--);c===l.length?l[c]=s:l.splice(c,0,s),(e.__current||[]).forEach((function(e){e.name===t&&e.currentIndex>=c&&e.currentIndex++}))}else e[t]={handlers:[s],runs:0};"hookAdded"!==t&&f("hookAdded",t,n,r,o)}else console.error("If specified, the hook priority must be a number.");else console.error("The hook callback must be a function.")}};var o=function(e,t){return function(n,r){if(a(n)&&(t||i(r))){if(!e[n])return 0;var o=0;if(t)o=e[n].handlers.length,e[n]={runs:e[n].runs,handlers:[]};else for(var s=e[n].handlers,c=function(t){s[t].namespace===r&&(s.splice(t,1),o++,(e.__current||[]).forEach((function(e){e.name===n&&e.currentIndex>=t&&e.currentIndex--})))},l=s.length-1;l>=0;l--)c(l);return"hookRemoved"!==n&&f("hookRemoved",n,r),o}}};var s=function(e){return function(t,n){return void 0!==n?t in e&&e[t].handlers.some((function(e){return e.namespace===n})):t in e}};var c=function(e,t){return function(n){e[n]||(e[n]={handlers:[],runs:0}),e[n].runs++;var i=e[n].handlers;for(var a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];if(!i||!i.length)return t?r[0]:void 0;var s={name:n,currentIndex:0};for(e.__current.push(s);s.currentIndex<i.length;){var c=i[s.currentIndex],l=c.callback.apply(null,r);t&&(r[0]=l),s.currentIndex++}return e.__current.pop(),t?r[0]:void 0}};var l=function(e){return function(){return e.__current&&e.__current.length?e.__current[e.__current.length-1].name:null}};var d=function(e){return function(t){return void 0===t?void 0!==e.__current[0]:!!e.__current[0]&&t===e.__current[0].name}};var u=function(e){return function(t){if(a(t))return e[t]&&e[t].runs?e[t].runs:0}};var p=function(){var e=Object.create(null),t=Object.create(null);return e.__current=[],t.__current=[],{addAction:r(e),addFilter:r(t),removeAction:o(e),removeFilter:o(t),hasAction:s(e),hasFilter:s(t),removeAllActions:o(e,!0),removeAllFilters:o(t,!0),doAction:c(e),applyFilters:c(t,!0),currentAction:l(e),currentFilter:l(t),doingAction:d(e),doingFilter:d(t),didAction:u(e),didFilter:u(t),actions:e,filters:t}},m=p(),f=(m.addAction,m.addFilter,m.removeAction,m.removeFilter,m.hasAction,m.hasFilter,m.removeAllActions,m.removeAllFilters,m.doAction);m.applyFilters,m.currentAction,m.currentFilter,m.doingAction,m.doingFilter,m.didAction,m.didFilter,m.actions,m.filters,t.a=p()}});
//# sourceMappingURL=simpay-admin.min.js.map